"use strict";(self.webpackChunkgoit_react_hw_08_phonebook=self.webpackChunkgoit_react_hw_08_phonebook||[]).push([[30],{3030:function(e,t,n){n.r(t),n.d(t,{default:function(){return q}});var a=n(4942),s=n(1413),o=n(885),r=n(2791),c=n(5562),i=n(6564),u=n(1465),l=n(255),d=(0,u.LC)({reducerPath:"contacts",baseQuery:(0,l.ni)({baseUrl:"https://connections-api.herokuapp.com",prepareHeaders:function(e,t){var n=(0,t.getState)().auth.token;return n&&e.set("authorization","Bearer ".concat(n)),e}}),tagTypes:["Contacts"],endpoints:function(e){return{fetchAllContacts:e.query({query:function(){return"/contacts"},method:"GET",providesTags:["Contacts"]}),addContact:e.mutation({query:function(e){return{url:"/contacts",method:"POST",body:{name:e.name,number:e.number}}},invalidatesTags:["Contacts"]}),deleteContact:e.mutation({query:function(e){return{url:"/contacts/".concat(e),method:"DELETE"}},invalidatesTags:["Contacts"]})}}}),m=d.useFetchAllContactsQuery,h=d.useAddContactMutation,p=d.useDeleteContactMutation,_="ContactsForm_form__1Y65-",f="ContactsForm_label__Z7jht",x="ContactsForm_labelText__MTX-A",b="ContactsForm_input__UjXFK",C="ContactsForm_button__zuUB3",j=n(184),v=function(){var e=(0,r.useState)({name:"",phone:""}),t=(0,o.Z)(e,2),n=t[0],u=t[1],l=h(),d=(0,o.Z)(l,2),p=d[0],v=d[1].isLoading,g=m().data,N=function(e){var t=e.currentTarget,o=t.name,r=t.value;u((0,s.Z)((0,s.Z)({},n),{},(0,a.Z)({},o,r)))},y=function(){p(n),c.Notify.success("".concat(n.name," has been added to your phonebook")),F()},F=function(){u({name:"",phone:""})};return(0,j.jsxs)("form",{className:_,onSubmit:function(e){e.preventDefault(),g.find((function(e){var t=e.name,a=e.phone;return n.name===t||n.phone===a}))?c.Notify.failure("".concat(n.name," exists in your phonebook")):y()},children:[(0,j.jsxs)("label",{className:f,children:[(0,j.jsx)("span",{className:x,children:"Name"}),(0,j.jsx)("input",{className:b,type:"text",name:"name",pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",title:"Name may contain only letters, apostrophe, dash and spaces. For example Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan",required:!0,value:n.name,onChange:N})]}),(0,j.jsxs)("label",{className:f,children:[(0,j.jsx)("span",{className:x,children:"Phone number"}),(0,j.jsx)("input",{className:b,type:"tel",name:"phone",pattern:"\\+?\\d{1,4}?[-.\\s]?\\(?\\d{1,3}?\\)?[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,9}",title:"Phone number must be digits and can contain spaces, dashes, parentheses and can start with +",required:!0,value:n.phone,onChange:N})]}),(0,j.jsx)("button",{className:C,type:"submit",children:v?(0,j.jsx)(i.Z,{size:"10px"}):"Add contact"})]})},g=n(5048),N=(0,n(5273).PH)("contacts/changeFilter"),y="ContactsFilter_wrapper__90o0z",F="ContactsFilter_input__8nlWg",Z="ContactsFilter_labelText__FMBfa",k=function(){var e,t=(0,g.v9)((function(e){return e.filter})),n=(0,g.I0)();return(0,j.jsx)("div",{className:y,children:(0,j.jsxs)("label",{children:[(0,j.jsx)("span",{className:Z,children:"Find contact using name or phone number"}),(0,j.jsx)("input",{className:F,type:"text",name:"filter",value:t,placeholder:"Viktor",onChange:void n(N(e.currentTarget.value))})]})})},T={item:"ContactsItem_item__pedOi",button:"ContactsItem_button__uPo7U"},A=function(e){var t=e.id,n=e.name,a=e.phone,s=p(),r=(0,o.Z)(s,2),c=r[0],u=r[1].isLoading;return(0,j.jsxs)("li",{className:T.item,children:[(0,j.jsx)("p",{className:T.text,children:n}),(0,j.jsx)("p",{className:T.text,children:a}),(0,j.jsx)("button",{className:T.button,type:"button",onClick:function(){return c(t)},disabled:u,children:u?(0,j.jsx)(i.Z,{size:10}):"Delete"})]})},z="ContactsList_list__mmE3Y",w="ContactsList_loader__Wb5g0",L=function(){var e=m(),t=e.data,n=e.isFetching,a=function(e,t){return null===t||void 0===t?void 0:t.filter((function(t){var n=t.name,a=t.phone;return n.toLowerCase().includes(e.toLowerCase())||a.includes(e)}))}((0,g.v9)((function(e){return e.filter})),t);return(0,j.jsxs)(j.Fragment,{children:[n&&(0,j.jsx)(i.Z,{className:w}),!n&&(0,j.jsx)("ul",{className:z,children:a&&a.map((function(e){var t=e.id,n=e.name,a=e.phone;return(0,j.jsx)(A,{id:t,name:n,phone:a},t)}))})]})},q=function(){return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(v,{}),(0,j.jsx)(k,{}),(0,j.jsx)(L,{})]})}}}]);
//# sourceMappingURL=30.329a4c91.chunk.js.map